<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Be My Valentine? üíò</title>
  <style>
    :root{
      --bg1:#ffdde1; --bg2:#ee9ca7; --card:#ffffffcc; --text:#1f1f1f;
      --accent:#ff3b7a;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0; min-height:100vh; display:grid; place-items:center;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background: radial-gradient(1200px 800px at 20% 10%, #fff, transparent 60%),
                  linear-gradient(135deg, var(--bg1), var(--bg2));
      color:var(--text);
      overflow:hidden;
    }
    .card{
      width:min(560px, 92vw);
      padding:28px 22px;
      border-radius:24px;
      background:var(--card);
      backdrop-filter: blur(10px);
      box-shadow: 0 20px 60px rgba(0,0,0,.18);
      text-align:center;
      position:relative;
    }
    .emoji{ font-size:40px; }
    h1{ margin:8px 0 8px; font-size: clamp(28px, 4vw, 40px); }
    p{ margin:10px auto 18px; max-width:46ch; line-height:1.45; font-size:16px; }

    .row{
      display:flex; gap:12px; justify-content:center; flex-wrap:wrap;
      margin-top:14px;
      position: relative;
      z-index: 2;
      min-height: 54px;
    }
    button{
      border:0; padding:12px 18px; border-radius:999px;
      font-weight:700; cursor:pointer; font-size:16px;
      transition: transform .08s ease;
      user-select:none;
    }
    button:active{ transform: scale(.98); }

    .yes{
      background: linear-gradient(135deg, var(--accent), #ff7aa8);
      color:white;
    }
    .no{
      background: linear-gradient(135deg, #111827, #374151);
      color:white;
      position:relative;
    }

    .msg{
      display:none;
      margin:18px auto 0;
      padding:18px 18px;
      border-radius:18px;
      background: #ffffffd6;
      border: 1px solid rgba(0,0,0,.06);
      width: min(520px, 100%);
      position: relative;
      z-index: 1;
    }

    .actions{
      display:flex;
      gap:12px;
      justify-content:center;
      flex-wrap:wrap;
      margin-top:12px;
    }

    .footer{
      margin-top:14px;
      font-size:12px;
      opacity:.7;
    }

    /* floating hearts */
    .heart{
      position:absolute;
      bottom:-40px;
      font-size:20px;
      animation: floatUp linear forwards;
      opacity:.9;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.12));
      pointer-events:none;
      z-index: 0;
    }
    @keyframes floatUp{
      from{ transform: translateY(0) translateX(0) rotate(0deg); opacity:.0; }
      10%{ opacity:.95; }
      to{ transform: translateY(-110vh) translateX(var(--drift)) rotate(360deg); opacity:0; }
    }

    /* divider line */
    .divider{
      height:1px; background:rgba(0,0,0,.08);
      margin:14px auto 6px;
      width:min(460px, 92%);
    }

    /* carousel (bigger + no crop) */
    .gallery{
      margin: 14px auto 8px;
      width: 100%;
      max-width: 520px;
      height: min(62vh, 520px);
      border-radius: 20px;
      overflow: hidden;
      position: relative;
      box-shadow: 0 12px 30px rgba(0,0,0,.18);
      background: rgba(255,255,255,.4);
    }
    .gallery img{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit: contain;
      background: rgba(255,255,255,.35);
      opacity:0;
      transition: opacity 1s ease;
    }
    .gallery img.active{ opacity:1; }

    /* ---------- Love Universe Overlay ---------- */
    .bigBtn{
      width: 100%;
      max-width: 520px;
    }

    .universeWrap{
      display:none;
      margin-top:16px;
      padding:16px;
      border-radius:18px;
      background: #ffffffd6;
      border: 1px solid rgba(0,0,0,.06);
    }

    .universeStage{
      position: relative;
      width: min(520px, 100%);
      height: min(62vh, 520px);
      margin: 0 auto;
      border-radius: 18px;
      overflow: hidden;
      background:
        radial-gradient(circle at 30% 20%, rgba(255,255,255,.9), rgba(255,255,255,.25) 35%, rgba(0,0,0,.06) 100%),
        linear-gradient(180deg, rgba(255,255,255,.2), rgba(0,0,0,.04));
    }

    .star{
      position:absolute;
      width:2px; height:2px;
      border-radius:999px;
      background: rgba(255,255,255,.95);
      opacity:.85;
      filter: drop-shadow(0 0 6px rgba(255,255,255,.65));
      animation: twinkle 2.8s infinite ease-in-out;
      pointer-events:none;
    }
    @keyframes twinkle{
      0%,100%{ opacity:.25; transform: scale(.9); }
      50%{ opacity:1; transform: scale(1.25); }
    }

    .earth{
      position:absolute;
      left:50%; top:50%;
      width: 190px; height: 190px;
      transform: translate(-50%, -50%);
      border-radius: 999px;
      background:
        radial-gradient(circle at 30% 30%, rgba(255,255,255,.85), rgba(255,255,255,0) 42%),
        radial-gradient(circle at 65% 70%, rgba(0,0,0,.22), rgba(0,0,0,0) 55%),
        linear-gradient(120deg, #1e90ff, #0057b7);
      box-shadow: 0 18px 60px rgba(0,0,0,.25);
      overflow:hidden;
    }

    .earth::before{
      content:"";
      position:absolute;
      inset:-20%;
      background:
        radial-gradient(circle at 20% 30%, rgba(60,180,90,.95) 0 18%, transparent 19%),
        radial-gradient(circle at 55% 45%, rgba(60,180,90,.9) 0 16%, transparent 17%),
        radial-gradient(circle at 70% 70%, rgba(60,180,90,.9) 0 14%, transparent 15%),
        radial-gradient(circle at 35% 75%, rgba(60,180,90,.9) 0 12%, transparent 13%);
      filter: blur(.2px);
      opacity:.95;
      animation: spinEarth 10s linear infinite;
    }
    @keyframes spinEarth{
      from{ transform: translateX(-10%); }
      to{ transform: translateX(10%); }
    }

    .orbit{
      position:absolute;
      left:50%; top:50%;
      width: 360px; height: 360px;
      transform: translate(-50%, -50%);
      border-radius: 999px;
      border: 1px dashed rgba(255,59,122,.35);
      pointer-events:none;
    }

    .orbitText{
      position:absolute;
      left:50%; top:50%;
      width: 360px; height: 360px;
      transform: translate(-50%, -50%);
      border-radius: 999px;
      animation: spin 8s linear infinite;
      pointer-events:none;
    }
    @keyframes spin{
      from{ transform: translate(-50%, -50%) rotate(0deg); }
      to{ transform: translate(-50%, -50%) rotate(360deg); }
    }

    .orbitText span{
      position:absolute;
      left:50%; top:50%;
      transform-origin: 0 0;
      font-weight:900;
      letter-spacing:.6px;
      color: rgba(255,59,122,.96);
      text-shadow: 0 10px 22px rgba(0,0,0,.16);
      font-size: 18px;
      white-space:nowrap;
      user-select:none;
    }

    @media (max-width: 420px){
      .earth{ width:165px; height:165px; }
      .orbit, .orbitText{ width:320px; height:320px; }
      .orbitText span{ font-size:16px; }
    }
  </style>
</head>
<body>
  <div class="card" id="card">
    <div class="emoji">üíå</div>

    <!-- READY SCREEN (new first screen) -->
    <div id="readyScreen">
      <h1>Helloo Darling... üíû</h1>
      <p style="margin:10px auto 18px;">I made something for you.</p>
      <div class="actions">
        <button id="readyBtn" class="yes">Yes üíñ</button>
      </div>
      <p style="margin:10 0 0; font-size:12px; opacity:.75;">
        Tap ‚ÄúYes‚Äù to start üíó
      </p>
    </div>

    <!-- TITLE changes after YES -->
    <h1 id="title" style="display:none;">Hey <span id="name">Dhruvi</span>‚Ä¶</h1>

    <!-- QUESTION (hidden until Ready->Yes) -->
    <div id="questionBlock" style="display:none;">
      <p>
        I have a very important question for you:
        <br><strong>Will you be my Valentine?</strong> üíò
      </p>

      <div class="row" id="btnRow">
        <button class="yes" id="yesBtn">Yes!! üíñ</button>
        <button class="no" id="noBtn">No üôà</button>
      </div>
    </div>

    <!-- LOVE SCREEN -->
    <div class="msg" id="loveMsg">
      <h2 style="margin:6px 0 10px;">I feel so lucky that you are in my life üíû</h2>
      <p style="margin:10 0 0;">You make me so happy baby I cannot explain how much üíñ</p>

      <div class="divider"></div>

      <div class="actions">
        <button id="readBtn" class="yes">Shayri ‚Üí</button>
        <button id="dateBtn" class="yes">Date ideas ‚Üí</button>
        <button id="carouselBtn" class="yes">Click here ‚Üí</button>
      </div>

      <!-- Date idea -->
      <div class="msg" id="dateMsg" style="display:none; margin-top:14px;">
        <h2 style="margin:10 0 10px;">Our Date Plan üíñ</h2>
        <p style="margin:10 0 10px;">
          <strong>Date idea:</strong> Virtual Escape Room orrr Dance Party??
        </p>
        <p style="margin:10 0 0;">Screenshot this and send it to me üòåüì∏</p>
      </div>
    </div>

    <!-- LOVE LETTER -->
    <div class="msg" id="letterMsg">
      <h2 style="margin:6px 0 10px;">For you üíù</h2>
      <p style="margin:10 0 0; line-height:1.6;">
         Dhruvi, tum meri subah ki roshni ho,
         meri raat ka sukoon ho,
         Iss pyaar ke din par bas itna kehna hai
         tum hi meri har dua ka junoon hoüíó
      </p>
    </div>

    <!-- CAROUSEL SCREEN -->
    <div class="msg" id="carouselMsg">
      <h2 style="margin:6px 0 10px;">Us üíû</h2>

      <div class="gallery">
        <img src="pic1.jpg.jpeg" class="active" alt="Photo 1">
        <img src="pic2.jpg.jpeg" alt="Photo 2">
        <img src="pic3.jpg.jpeg" alt="Photo 3">
        <img src="pic4.jpg.jpeg" alt="Photo 4">
        <img src="pic5.jpg.jpeg" alt="Photo 5">
        <img src="pic6.jpg.jpeg" alt="Photo 6">
        <img src="pic7.jpg.jpeg" alt="Photo 7">
        <img src="pic8.jpg.jpeg" alt="Photo 8">
      </div>

      <p style="margin-top:10px;">Every moment with you feels like this song. üíó</p>
      <p style="margin:10 0 0; font-size:12px; opacity:.75;">
        If music doesn‚Äôt start automatically, tap anywhere on the page.
      </p>

      <div class="actions">
        <button id="loveUniverseBtn" class="yes bigBtn">
          Click here to see how much I love you üåçüíû
        </button>
      </div>

      <div class="universeWrap" id="universeWrap">
        <div class="universeStage" id="universeStage">
          <div class="orbit"></div>
          <div class="orbitText" id="orbitText"></div>
          <div class="earth" aria-label="Planet Earth"></div>
        </div>

        <div class="actions" style="margin-top:12px;">
          <button id="closeUniverseBtn" class="yes bigBtn">Close ‚ú®</button>
        </div>
      </div>
    </div>

    <div class="footer">Made with ‚ù§Ô∏è</div>
  </div>

  <!-- Background music -->
  <audio id="bgm" preload="auto" loop>
    <source src="song.mp3.mp3" type="audio/mpeg">
  </audio>

  <!-- Question voice note (autoplays AFTER Ready click) -->
  <audio id="qVoice" preload="auto">
    <source src="question.mp4" type="audio/mpeg">
  </audio>

  <script>
    // Optional name via URL: ?name=HerName
    const params = new URLSearchParams(location.search);
    const herName = params.get("name");
    if (herName) document.getElementById("name").textContent = herName;

    const readyScreen = document.getElementById("readyScreen");
    const readyBtn = document.getElementById("readyBtn");

    const title = document.getElementById("title");
    const questionBlock = document.getElementById("questionBlock");
    const yesBtn  = document.getElementById("yesBtn");
    const noBtn   = document.getElementById("noBtn");

    const loveMsg     = document.getElementById("loveMsg");
    const readBtn     = document.getElementById("readBtn");
    const dateBtn     = document.getElementById("dateBtn");
    const carouselBtn = document.getElementById("carouselBtn");

    const dateMsg     = document.getElementById("dateMsg");
    const letterMsg   = document.getElementById("letterMsg");
    const carouselMsg = document.getElementById("carouselMsg");

    const card = document.getElementById("card");
    const bgm  = document.getElementById("bgm");
    const qVoice = document.getElementById("qVoice");

    // Universe elements
    const loveUniverseBtn = document.getElementById("loveUniverseBtn");
    const universeWrap = document.getElementById("universeWrap");
    const closeUniverseBtn = document.getElementById("closeUniverseBtn");
    const universeStage = document.getElementById("universeStage");
    const orbitText = document.getElementById("orbitText");

    let noDodges = 0;
    let carouselStarted = false;

    // initial state
    loveMsg.style.display = "none";
    letterMsg.style.display = "none";
    carouselMsg.style.display = "none";
    universeWrap.style.display = "none";

    function popHearts(count=18){
      for(let i=0;i<count;i++){
        const s = document.createElement("div");
        s.className = "heart";
        const hearts = ["üíñ","üíò","üíó","üíì","üíû","‚ù§Ô∏è","üíù"];
        s.textContent = hearts[Math.floor(Math.random()*hearts.length)];
        const left = Math.random()*100;
        const dur = 3 + Math.random()*3.5;
        const drift = (Math.random()*2-1) * 160;
        s.style.left = left + "vw";
        s.style.animationDuration = dur + "s";
        s.style.setProperty("--drift", drift + "px");
        s.style.fontSize = (16 + Math.random()*18) + "px";
        document.body.appendChild(s);
        setTimeout(()=>s.remove(), (dur*1000)+200);
      }
    }

    // READY -> show question + autoplay voice
    readyBtn.addEventListener("click", async ()=>{
      popHearts(18);

      readyScreen.style.display = "none";
      title.style.display = "block";
      questionBlock.style.display = "block";

      // Autoplay voice note after user gesture (this click)
      try{
        qVoice.currentTime = 0;
        await qVoice.play();
      }catch(e){
        // If it still blocks on some browsers, it will just not play
        console.log("Question voice autoplay blocked.");
      }
    });

    function startCarousel(){
      if (carouselStarted) return;
      carouselStarted = true;

      const images = document.querySelectorAll(".gallery img");
      if (!images.length) return;

      let idx = 0;
      setInterval(()=>{
        images[idx].classList.remove("active");
        idx = (idx + 1) % images.length;
        images[idx].classList.add("active");
      }, 2800);
    }

    async function startMusic(){
      try{
        bgm.volume = 0.35;
        await bgm.play();
      }catch(e){
        // Autoplay likely blocked; user gesture will be needed.
      }
    }

    // If autoplay blocked, tapping anywhere can start it (on carousel screen)
    document.addEventListener("click", ()=>{
      if (carouselMsg.style.display === "block") startMusic();
    });

    // YES -> love screen
    yesBtn.addEventListener("click", ()=>{
      popHearts(28);
      title.textContent = "I love you, Darling üíû";
      questionBlock.style.display = "none";
      loveMsg.style.display = "block";
    });

    // Shayri
    readBtn.addEventListener("click", ()=>{
      letterMsg.style.display = "block";
      popHearts(14);
      letterMsg.scrollIntoView({behavior:"smooth", block:"center"});
    });

    // Date idea
    dateBtn.addEventListener("click", ()=>{
      dateMsg.style.display = "block";
      popHearts(16);
      dateMsg.scrollIntoView({behavior:"smooth", block:"center"});
    });

    // Carousel screen
    carouselBtn.addEventListener("click", async ()=>{
      loveMsg.style.display = "none";
      letterMsg.style.display = "none";
      dateMsg.style.display = "none";
      carouselMsg.style.display = "block";
      universeWrap.style.display = "none";

      popHearts(24);
      startCarousel();
      await startMusic();
      carouselMsg.scrollIntoView({behavior:"smooth", block:"center"});
    });

    // Universe Build + Toggle
    function buildUniverseOnce(){
      if (universeStage.dataset.built === "1") return;
      universeStage.dataset.built = "1";

      const starCount = 70;
      for (let i=0; i<starCount; i++){
        const s = document.createElement("div");
        s.className = "star";
        s.style.left = (Math.random()*100) + "%";
        s.style.top  = (Math.random()*100) + "%";
        s.style.animationDelay = (Math.random()*2.8) + "s";
        s.style.opacity = (0.25 + Math.random()*0.75).toFixed(2);
        s.style.transform = `scale(${0.7 + Math.random()*1.4})`;
        universeStage.appendChild(s);
      }

      // Keep your original phrase
      const phrase = ["I","love","you","Darling","üíû","till","the","ends","of","the","Earth","üíû"];
      const radius = 150;
      const step = 360 / phrase.length;

      phrase.forEach((word, idx)=>{
        const a = (idx * step) * Math.PI / 180;
        const x = Math.cos(a) * radius;
        const y = Math.sin(a) * radius;

        const sp = document.createElement("span");
        sp.textContent = word;

        const rot = (idx * step) + 90;
        sp.style.transform = `translate(${x}px, ${y}px) rotate(${rot}deg)`;
        orbitText.appendChild(sp);
      });
    }

    loveUniverseBtn.addEventListener("click", ()=>{
      buildUniverseOnce();
      universeWrap.style.display = "block";
      popHearts(14);
      universeWrap.scrollIntoView({behavior:"smooth", block:"center"});
    });

    closeUniverseBtn.addEventListener("click", ()=>{
      universeWrap.style.display = "none";
    });

    // NO button dodge
    function moveNoButton(){
      const rect = card.getBoundingClientRect();
      const pad = 18;
      const maxX = rect.width - noBtn.offsetWidth - pad;
      const maxY = rect.height - noBtn.offsetHeight - pad;

      const x = pad + Math.random()*Math.max(0, maxX);
      const y = pad + Math.random()*Math.max(0, maxY);

      noBtn.style.position = "absolute";
      noBtn.style.left = x + "px";
      noBtn.style.top  = y + "px";
    }

    ["mouseenter","touchstart","pointerenter"].forEach(evt=>{
      noBtn.addEventListener(evt, (e)=>{
        noDodges++;
        popHearts(6);
        moveNoButton();

        if(noDodges === 3) noBtn.textContent = "Are you sure? üò≠";
        if(noDodges === 4) noBtn.textContent = "Pakka? ü•∫";
        if(noDodges === 5) noBtn.textContent = "Naiii? üò≠";
        if(noDodges === 6) noBtn.textContent = "Katiii? ü•∫";
        if(noDodges === 7) noBtn.textContent = "Hawww? üò≠";
        if(noDodges === 8) noBtn.textContent = "Awww? ü•∫";
        if(noDodges >= 9)  noBtn.textContent = "Okay fine üò§";

        e.preventDefault?.();
      }, {passive:false});
    });
  </script>
</body>
</html>
